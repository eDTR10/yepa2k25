import{c as w,r as n,j as e}from"./index-b41d15ee.js";import{B as F}from"./bg-stars-2bd79022.js";import{a as m}from"./axios-19f2ad51.js";import{X as N}from"./x-783a8e78.js";const B=w("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),k=w("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);function D(){const[C,R]=n.useState([]),[M,S]=n.useState([]),[h,T]=n.useState([]),[p,b]=n.useState(!0),[c,g]=n.useState(""),[l,d]=n.useState("mr"),[i,f]=n.useState(null),[a,x]=n.useState(null),[$,u]=n.useState(!1),_=n.useMemo(()=>Array.from({length:100},(s,t)=>({id:t,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,delay:`${Math.random()*2}s`,size:`${1+Math.random()*2}px`})),[]);n.useEffect(()=>{(async()=>{try{b(!0);const[t,r]=await Promise.all([m.get("/api/v1/vote/ranking/"),m.get("/api/v1/rate/ranking/")]);R(t.data.mr_ranking||[]),S(t.data.ms_ranking||[]),T(r.data.ranking||[]),g("")}catch(t){g("Failed to fetch ranking data"),console.error(t)}finally{b(!1)}})()},[]);const y=s=>s===0?{bg:"rgba(255, 215, 0, 0.15)",border:"rgba(255, 215, 0, 0.4)",text:"text-yellow-300"}:s===1?{bg:"rgba(192, 192, 192, 0.15)",border:"rgba(192, 192, 192, 0.4)",text:"text-gray-300"}:s===2?{bg:"rgba(205, 127, 50, 0.15)",border:"rgba(205, 127, 50, 0.4)",text:"text-orange-300"}:{bg:"rgba(100, 150, 255, 0.1)",border:"rgba(100, 150, 255, 0.3)",text:"text-blue-300"},j=s=>s===0?"ðŸ¥‡":s===1?"ðŸ¥ˆ":s===2?"ðŸ¥‰":`#${s+1}`,P=async s=>{x(s),u(!0);try{const t=await m.get(`/api/v1/rate/performer-scores/${s.performer.id}/`);x(t.data)}catch(t){console.error("Failed to fetch performer scores:",t)}finally{u(!1)}},v=l==="mr"?C:M,z=l==="mr"?"Mr. Best Dressed":"Ms. Best Dressed";return e.jsxs("div",{className:"relative min-h-screen pt-5 pb-10 w-screen overflow-hidden flex items-center justify-center p-0 bg-[#040b35]",children:[e.jsxs("div",{className:"z-0 absolute w-[400vw] h-full pointer-events-none",children:[e.jsx("img",{src:F,className:"absolute z-[-1] h-[80vh] stars",alt:""}),e.jsx("div",{className:"stars-container",children:_.map(s=>e.jsx("div",{className:"star",style:{left:s.left,top:s.top,animationDelay:s.delay,width:s.size,height:s.size}},s.id))}),e.jsx("div",{className:"moon"})]}),e.jsxs("div",{className:"w-screen overflow-hidden",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12 px-4",children:[e.jsxs("h1",{className:"text-4xl sm:text-3xl text-[#ffcc75] font-extrabold mb-2 sm:mb-4 flex items-center justify-center gap-3",children:[e.jsx(B,{className:"w-8 h-8 sm:w-10 sm:h-10"}),"Live Rankings"]}),e.jsx("p",{className:"text-blue-200 text-base sm:text-lg",children:"Vote count updated in real-time"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8 px-4 flex-wrap",children:[e.jsx("button",{onClick:()=>d("mr"),className:"px-6 sm:px-8 py-2.5 sm:py-3 rounded-full font-semibold transition-all duration-300",style:{background:l==="mr"?"linear-gradient(135deg, rgba(59, 130, 246, 0.6) 0%, rgba(147, 51, 234, 0.6) 100%)":"rgba(255, 255, 255, 0.1)",border:l==="mr"?"1px solid rgba(59, 130, 246, 0.8)":"1px solid rgba(255, 255, 255, 0.2)",color:"white"},children:"Prince"}),e.jsx("button",{onClick:()=>d("ms"),className:"px-6 sm:px-8 py-2.5 sm:py-3 rounded-full font-semibold transition-all duration-300",style:{background:l==="ms"?"linear-gradient(135deg, rgba(147, 51, 234, 0.6) 0%, rgba(236, 72, 153, 0.6) 100%)":"rgba(255, 255, 255, 0.1)",border:l==="ms"?"1px solid rgba(147, 51, 234, 0.8)":"1px solid rgba(255, 255, 255, 0.2)",color:"white"},children:"Princess"}),e.jsx("button",{onClick:()=>d("performers"),className:"px-6 sm:px-8 py-2.5 sm:py-3 rounded-full font-semibold transition-all duration-300",style:{background:l==="performers"?"linear-gradient(135deg, rgba(236, 72, 153, 0.6) 0%, rgba(168, 85, 247, 0.6) 100%)":"rgba(255, 255, 255, 0.1)",border:l==="performers"?"1px solid rgba(236, 72, 153, 0.8)":"1px solid rgba(255, 255, 255, 0.2)",color:"white"},children:"ðŸŽ­ Performance"})]}),p&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-300 text-lg",children:"Loading rankings..."})}),c&&e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-red-400 text-lg",children:c})}),!p&&!c&&e.jsxs("div",{className:"max-w-5xl mx-auto px-4 space-y-4",children:[(l==="mr"||l==="ms")&&e.jsx(e.Fragment,{children:v.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-400 text-lg",children:["No votes yet for ",z]})}):v.map((s,t)=>{const r=y(t),o=j(t);return e.jsxs("div",{className:"flex items-center gap-4 p-4 sm:p-5 rounded-2xl transition-all hover:scale-102",style:{background:r.bg,border:`1px solid ${r.border}`,backdropFilter:"blur(20px)"},children:[e.jsx("div",{className:"flex-shrink-0",children:typeof o=="string"&&o.includes("ï¿½")?e.jsx("span",{className:"text-2xl sm:text-3xl",children:o}):e.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-full flex items-center justify-center font-bold text-lg sm:text-xl ${r.text}`,style:{background:"rgba(255, 255, 255, 0.1)",border:`1px solid ${r.border}`},children:o})}),e.jsx("div",{className:"flex-shrink-0 w-16 h-16 sm:w-20 sm:h-20 rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsx("img",{src:`https://zipfile.pythonanywhere.com/${s.image}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white truncate",children:s.title}),e.jsx("p",{className:"text-blue-200 text-sm sm:text-base mb-1",children:s.location}),e.jsxs("p",{className:"text-gray-400 text-xs sm:text-sm",children:["Age: ",s.age]})]}),e.jsxs("div",{className:"flex-shrink-0 text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-white",children:s.votes}),e.jsx("p",{className:"text-gray-400 text-xs sm:text-sm",children:s.votes===1?"vote":"votes"})]}),e.jsxs("button",{onClick:()=>f(s),className:"flex-shrink-0 px-3 sm:px-4 py-2 rounded-lg transition-all hover:scale-105 text-xs sm:text-sm font-semibold flex items-center gap-1.5",style:{background:"rgba(255, 255, 255, 0.15)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white"},children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"View"})]})]},s.id)})}),l==="performers"&&e.jsx(e.Fragment,{children:h.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400 text-lg",children:"No ratings yet"})}):h.map((s,t)=>{const r=y(t),o=j(t);return e.jsxs("div",{className:"flex items-center gap-4 p-4 sm:p-5 rounded-2xl transition-all hover:scale-102",style:{background:r.bg,border:`1px solid ${r.border}`,backdropFilter:"blur(20px)"},children:[e.jsx("div",{className:"flex-shrink-0",children:typeof o=="string"&&o.includes("ï¿½")?e.jsx("span",{className:"text-2xl sm:text-3xl",children:o}):e.jsx("div",{className:`w-12 h-12 sm:w-14 sm:h-14 rounded-full flex items-center justify-center font-bold text-lg sm:text-xl ${r.text}`,style:{background:"rgba(255, 255, 255, 0.1)",border:`1px solid ${r.border}`},children:o})}),e.jsx("div",{className:"flex-shrink-0 w-16 h-16 sm:w-20 sm:h-20 rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsx("img",{src:`https://zipfile.pythonanywhere.com${s.performer.photo}`,alt:s.performer.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-bold text-white truncate",children:s.performer.name}),e.jsx("p",{className:"text-purple-300 text-sm sm:text-base",children:"Performance Battle"})]}),e.jsxs("div",{className:"flex-shrink-0 text-right",children:[e.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-white",children:s.average_total_score.toFixed(1)}),e.jsxs("p",{className:"text-gray-400 text-xs sm:text-sm",children:[s.total_ratings===1?"rating":"ratings"," (",s.total_ratings,")"]})]}),e.jsxs("button",{onClick:()=>P(s),className:"flex-shrink-0 px-3 sm:px-4 py-2 rounded-lg transition-all hover:scale-105 text-xs sm:text-sm font-semibold flex items-center gap-1.5",style:{background:"rgba(255, 255, 255, 0.15)",border:"1px solid rgba(255, 255, 255, 0.3)",color:"white"},children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Details"})]})]},s.performer.id)})})]}),e.jsx("div",{className:"mt-12 sm:mt-16 px-4 max-w-3xl mx-auto text-center",children:e.jsx("div",{className:"p-4 sm:p-6 rounded-2xl",style:{background:"rgba(100, 150, 255, 0.1)",border:"1px solid rgba(100, 150, 255, 0.3)",backdropFilter:"blur(20px)"},children:e.jsxs("p",{className:"text-gray-300 text-sm sm:text-base",children:["Rankings are updated in real-time as votes are cast.",e.jsx("span",{className:"block mt-2 text-blue-300",children:"Go back to voting to cast your vote!"})]})})})]}),i&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-[#0a1535] rounded-2xl max-w-md w-full max-h-[80vh] flex flex-col border border-cyan-500/30",style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(255, 255, 255, 0.03)"},children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-cyan-500/20 flex items-center justify-between bg-[#0a1535]/95 backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden border border-cyan-500/30",children:e.jsx("img",{src:`https://zipfile.pythonanywhere.com/${i.image}`,alt:i.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-white truncate",children:i.title}),e.jsxs("p",{className:"text-xs sm:text-sm text-cyan-300",children:[i.votes," ",i.votes===1?"vote":"votes"]})]})]}),e.jsx("button",{onClick:()=>f(null),className:"flex-shrink-0 p-2 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(N,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-4 sm:p-6 space-y-2 overflow-y-auto flex-1",children:i.voters&&i.voters.length>0?i.voters.map((s,t)=>e.jsxs("div",{className:"p-3 rounded-lg flex items-center gap-3",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(100, 200, 255, 0.2)"},children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold text-white",style:{background:"linear-gradient(135deg, rgba(59, 130, 246, 0.6), rgba(147, 51, 234, 0.6))"},children:t+1}),e.jsx("span",{className:"text-white text-sm sm:text-base truncate",children:s})]},t)):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No voters yet"})})})]})}),a&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-[#0a1535] rounded-2xl max-w-md w-full max-h-[85vh] flex flex-col border border-pink-500/30",style:{boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(255, 255, 255, 0.03)"},children:[e.jsxs("div",{className:"p-4 sm:p-6 border-b border-pink-500/20 flex items-center justify-between bg-[#0a1535]/95 backdrop-blur-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg overflow-hidden border border-pink-500/30",children:e.jsx("img",{src:`https://zipfile.pythonanywhere.com${a.performer.photo}`,alt:a.performer.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-white truncate",children:a.performer.name}),e.jsx("p",{className:"text-xs sm:text-sm text-pink-300",children:"Score Breakdown"})]})]}),e.jsx("button",{onClick:()=>x(null),className:"flex-shrink-0 p-2 hover:bg-red-500/20 rounded-lg transition-colors",children:e.jsx(N,{className:"w-5 h-5 text-white"})})]}),e.jsx("div",{className:"p-4 sm:p-6 space-y-3 overflow-y-auto flex-1",children:$?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Loading breakdown..."})}):a.average_scores?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:[{name:"Talent",key:"Talent",max:30},{name:"Creativity",key:"Creativity",max:20},{name:"Stage Presence",key:"Stage Presence",max:20},{name:"Relevance of ICT",key:"Relevance of ICT",max:15},{name:"Time Adherence",key:"Time Adherence",max:15}].map(s=>{const t=a.average_scores[s.key],r=t/s.max*100;return e.jsxs("div",{className:"p-3 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(236, 72, 153, 0.2)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:s.name}),e.jsxs("span",{className:"text-pink-300 font-bold",children:[t,"/",s.max]})]}),e.jsx("div",{className:"w-full h-2 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-pink-500 to-purple-500 transition-all",style:{width:`${r}%`}})}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:[r.toFixed(0),"%"]})]},s.key)})}),e.jsxs("div",{className:"p-3 rounded-lg mt-4 border-t border-pink-500/20 pt-4",style:{background:"rgba(236, 72, 153, 0.1)",border:"1px solid rgba(236, 72, 153, 0.3)"},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-white font-bold",children:"Average Total Score"}),e.jsxs("span",{className:"text-yellow-300 text-2xl font-bold",children:[a.average_scores.average_total.toFixed(1),"/100"]})]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Based on ",a.total_ratings," ",a.total_ratings===1?"rating":"ratings"]})]}),a.ratings&&a.ratings.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-pink-500/20 space-y-2",children:[e.jsx("h4",{className:"text-white font-bold text-sm",children:"Judge Ratings"}),a.ratings.map(s=>e.jsxs("div",{className:"p-2 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(236, 72, 153, 0.15)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-pink-300 font-semibold text-sm",children:s.rater}),e.jsxs("span",{className:"text-yellow-300 font-bold text-sm",children:[s.total_score,"/100"]})]}),e.jsx("div",{className:"grid grid-cols-5 gap-1 text-xs",children:[{key:"Talent",name:"T"},{key:"Creativity",name:"C"},{key:"Stage Presence",name:"SP"},{key:"Relevance of ICT",name:"ICT"},{key:"Time Adherence",name:"TA"}].map((t,r)=>e.jsxs("div",{className:"text-center text-gray-400",children:[e.jsx("div",{className:"text-cyan-300 font-bold",children:s.ratings[r]}),e.jsx("div",{className:"text-xs",children:t.name})]},t.key))})]},s.id))]})]}):e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No score data available"})})})]})}),e.jsx("style",{children:`
        @keyframes shine {
          0% { background-position: -200% center; }
          100% { background-position: 200% center; }
        }
        @keyframes blink {
          0%, 50% { opacity: 1; }
          51%, 100% { opacity: 0; }
        }
        .star {
          position: absolute;
          background: white;
          border-radius: 50%;
          animation: blink 2s infinite;
        }
        .moon {
          position: absolute;
          top: 10%;
          left: 10%;
          width: 60px;
          height: 60px;
          background: radial-gradient(circle at 25% 25%, transparent 35%, #ffeb3b 36%, #ffeb3b 65%, transparent 66%);
          border-radius: 50%;
          opacity: 0.7;
          box-shadow: 0 0 20px rgba(255, 235, 59, 0.5);
        }
      `})]})}export{D as default};
