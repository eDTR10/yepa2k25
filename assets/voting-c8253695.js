import{c as f,r as a,j as e}from"./index-b41d15ee.js";import{B as Z}from"./bg-stars-2bd79022.js";import{a as S}from"./axios-19f2ad51.js";const K=f("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Q=f("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ee=f("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),te=f("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function ce(){const[T,p]=a.useState(0),M=a.useRef(!0),[se,V]=a.useState(0),[n,C]=a.useState(!1),[W,q]=a.useState(0),[m,z]=a.useState(0),[i,v]=a.useState("men"),[c,y]=a.useState({}),[j,A]=a.useState([]),[$,G]=a.useState([]),[ae,J]=a.useState(""),[re,X]=a.useState(!1),[ne,I]=a.useState(""),[D,x]=a.useState("");a.useEffect(()=>{const t=async()=>{try{X(!0);const l=await S.get("/api/v1/vote/candidates/"),g=l.data.mr||[],b=l.data.ms||[];A(g),G(b),I("")}catch(l){I("Failed to fetch candidates"),console.error(l)}finally{X(!1)}},s=localStorage.getItem("voterName");s&&J(s);const d=localStorage.getItem("userVotes");if(d)try{y(JSON.parse(d))}catch(l){console.error("Failed to load votes from localStorage",l)}t()},[]),a.useEffect(()=>{if(M.current){M.current=!1;return}localStorage.setItem("userVotes",JSON.stringify(c))},[c]);const H=a.useMemo(()=>Array.from({length:100},(t,s)=>({id:s,left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,delay:`${Math.random()*2}s`,size:`${1+Math.random()*2}px`})),[]),o=i==="men"?j:$;a.useEffect(()=>{const t=setInterval(()=>{w()},5e3);return()=>clearInterval(t)},[o.length]);const N=async t=>{var l,g,b,_,R,B,L,O;const s=localStorage.getItem("voterName");if(!s){x("Voter name not found. Please refresh and select your name again.");return}const d=j.some(r=>r.id===t);if(c[t]){try{await S.post(`/api/v1/vote/remove-vote/${t}/`,{voter_name:s}),y(r=>({...r,[t]:!1})),x("")}catch(r){x(((g=(l=r.response)==null?void 0:l.data)==null?void 0:g.detail)||((_=(b=r.response)==null?void 0:b.data)==null?void 0:_.message)||"You have already voted for this candidate")}return}if(d){if(h().length>0){x("You can only vote for one Prince");return}}else if(u().length>0){x("You can only vote for one Princess");return}try{await S.post(`/api/v1/vote/vote/${t}/`,{voter_name:s}),y(r=>({...r,[t]:!0})),x("")}catch(r){x(((B=(R=r.response)==null?void 0:R.data)==null?void 0:B.detail)||((O=(L=r.response)==null?void 0:L.data)==null?void 0:O.message)||"You have already voted a candidate")}},h=()=>j.filter(t=>c[t.id]),u=()=>$.filter(t=>c[t.id]),Y=h().length===1&&u().length===1,w=()=>{V(1),p(t=>(t+1)%o.length)},E=()=>{V(-1),p(t=>(t-1+o.length)%o.length)},F=t=>{C(!0),q(t.type==="mousedown"?t.clientX:t.touches[0].clientX)},P=t=>{if(!n)return;const d=(t.type==="mousemove"?t.clientX:t.touches[0].clientX)-W;z(d)},k=()=>{n&&(C(!1),m>100?E():m<-100&&w(),z(0))},U=t=>{const s=(t-T+o.length)%o.length,d=s===0?`translateX(${m*.5}px)`:"";return s===0?{transform:`${d} scale(1) rotateY(0deg)`,opacity:1,zIndex:50,filter:"blur(0px)",transition:n?"none":"all 0.7s ease-out"}:s===1?{transform:`translateX(${90+m*.3}%) scale(0.88) rotateY(-20deg)`,opacity:.85,zIndex:40,filter:"blur(0.5px)",transition:n?"none":"all 0.7s ease-out"}:s===2?{transform:`translateX(${160+m*.2}%) scale(0.76) rotateY(-35deg)`,opacity:.7,zIndex:30,filter:"blur(1px)",transition:n?"none":"all 0.7s ease-out"}:s===o.length-1?{transform:`translateX(${-90+m*.3}%) scale(0.88) rotateY(20deg)`,opacity:.85,zIndex:40,filter:"blur(0.5px)",transition:n?"none":"all 0.7s ease-out"}:s===o.length-2?{transform:`translateX(${-160+m*.2}%) scale(0.76) rotateY(35deg)`,opacity:.7,zIndex:30,filter:"blur(1px)",transition:n?"none":"all 0.7s ease-out"}:{transform:"scale(0.6) rotateY(0deg)",opacity:0,zIndex:10,filter:"blur(3px)",transition:n?"none":"all 0.7s ease-out"}};return e.jsxs("div",{className:" relative min-h-screen pt-5 pb-10 w-screen overflow-hidden flex items-center justify-center p-0   bg-transparent",children:[e.jsxs("div",{className:" z-0 absolute w-[400vw] h-full pointer-events-none ",children:[e.jsx("img",{src:Z,className:" absolute z-[-1] h-[80vh] stars ",alt:""}),e.jsx("div",{className:"stars-container",children:H.map(t=>e.jsx("div",{className:"star",style:{left:t.left,top:t.top,animationDelay:t.delay,width:t.size,height:t.size}},t.id))}),e.jsx("div",{className:"moon"})]}),e.jsxs("div",{className:"w-screen overflow-hidden  ",children:[D&&e.jsx("div",{className:"mb-4 p-3 bg-red-500/20 border border-red-500 rounded-lg text-red-200 text-center",children:D}),e.jsxs("div",{className:"text-center mb-8 sm:mb-16",children:[e.jsx("h1",{className:"text-4xl sm:text-2xl text-[#ffcc75] font-extrabold mb-2 sm:mb-4 px-4",children:"Mr. and Ms. Best Dresse          "}),e.jsx("p",{className:"text-blue-200 text-base sm:text-base px-4 mb-6",children:"Vote for your favorite Arabian Prince and Princess this night"}),e.jsxs("div",{className:"flex items-center justify-center gap-4",children:[e.jsx("span",{className:`text-lg font-semibold transition-colors ${i==="men"?"text-white":"text-gray-400"}`,children:"Prince"}),e.jsx("button",{onClick:()=>{v(i==="men"?"women":"men"),p(0)},className:"relative inline-flex cursor-pointer h-5 w-14 items-center rounded-full transition-colors",style:{background:i==="men"?"rgba(59, 130, 246, 0.4)":"rgba(147, 51, 234, 0.4)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform",style:{transform:i==="women"?"translateX(36px)":"translateX(2px)"}})}),e.jsx("span",{className:`text-lg font-semibold transition-colors ${i==="women"?"text-white":"text-gray-400"}`,children:"Princess"})]})]}),!Y&&e.jsxs("div",{className:"relative h-[320px] sm:h-[400px] flex items-center justify-center",style:{perspective:"2000px"},onMouseDown:F,onMouseMove:P,onMouseUp:k,onMouseLeave:k,onTouchStart:F,onTouchMove:P,onTouchEnd:k,children:[o.map((t,s)=>e.jsx("div",{className:"absolute h-[98%]  w-[290px] sm:w-[280px] ",style:{...U(s),transformStyle:"preserve-3d",cursor:n?"grabbing":"grab",userSelect:"none"},children:e.jsxs("div",{className:"w-full h-full rounded-2xl sm:rounded-2xl overflow-hidden relative",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(255, 255, 255, 0.03)"},children:[e.jsxs("div",{className:"h-48 sm:h-56 md:h-64 overflow-hidden",children:[e.jsx("img",{src:`https://zipfile.pythonanywhere.com/${t.image}`,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-0 left-0 right-0 h-48 sm:h-56 md:h-64",style:{background:"linear-gradient(to bottom, rgba(4,11,53,0) 0%, rgba(4,11,53,0.4) 100%)"}})]}),e.jsxs("div",{className:"p-4 sm:p-2 md:p-2 relative",children:[e.jsxs("div",{className:"absolute -top-10 right-5  px-1 py-1 w-[50px] rounded-full flex items-center gap-1.5 sm:gap-2",style:{background:"rgba(255, 255, 255, 0.15)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx(te,{className:"w-3 h-3 sm:w-4 sm:h-4 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-white font-semibold text-sm sm:text-sm",children:t.age})]}),e.jsx("h3",{className:"text-xl sm:text-lg md:text-xl font-bold text-white mb-1 sm:mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2 mb-3 sm:mb-4",children:[e.jsx(K,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-blue-300"}),e.jsx("span",{className:"text-blue-200 text-xs sm:text-xs",children:t.location})]}),e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("button",{className:"px-4 sm:px-6 py-1.5 sm:py-2 rounded-full font-semibold transition-all duration-300 cursor-pointer hover:scale-105 text-sm sm:text-base",onClick:()=>{N(t.id)},style:{background:c[t.id]?"linear-gradient(135deg, rgba(34, 197, 94, 0.4) 0%, rgba(34, 197, 94, 0.6) 100%)":"linear-gradient(135deg, rgba(59, 130, 246, 0.4) 0%, rgba(147, 51, 234, 0.4) 100%)",backdropFilter:"blur(10px)",border:c[t.id]?"1px solid rgba(34, 197, 94, 0.6)":"1px solid rgba(255, 255, 255, 0.2)",color:"white"},children:c[t.id]?"âœ“ Voted":"Vote"})})]}),e.jsx("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-opacity duration-500 pointer-events-none",style:{background:"linear-gradient(120deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%)",backgroundSize:"200% 200%",animation:"shine 3s infinite"}})]})},t.id)),e.jsx("button",{onClick:E,className:"hidden sm:flex absolute left-0 z-40 p-3 sm:p-4 rounded-full transition-all duration-300 hover:scale-110",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsx(Q,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsx("button",{onClick:w,className:"hidden sm:flex absolute right-0 z-40 p-3 sm:p-4 rounded-full transition-all duration-300 hover:scale-110",style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsx(ee,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})})]}),e.jsxs("div",{className:"mt-8 sm:mt-12 px-4",children:[Y&&e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white mb-2",children:"âœ¨ Voting Complete! âœ¨"}),e.jsx("p",{className:"text-green-400 text-lg",children:"You have successfully voted for your favorites!"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-1 gap-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"p-4 sm:p-6 rounded-2xl cursor-pointer",style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)"},onClick:()=>{v(h().length>0?i:"men"),p(0)},children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-blue-300 mb-4",children:["ðŸ‘¨ Prince Votes (",h().length,")"]}),h().length>0?e.jsx("div",{className:"space-y-3",children:h().map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)"},children:[e.jsx("div",{className:"relative rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(255, 255, 255, 0.03)"},children:e.jsx("img",{src:`https://zipfile.pythonanywhere.com/${t.image}`,alt:t.title,className:"w-16 h-16 object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-semibold truncate",children:t.title}),e.jsx("p",{className:"text-blue-200 text-sm",children:t.location})]}),e.jsx("button",{onClick:()=>N(t.id),className:"text-xs px-3 py-1 rounded-full bg-red-500 hover:bg-red-600 text-white transition-colors whitespace-nowrap",children:"Remove"})]},t.id))}):e.jsx("p",{className:"text-gray-400",children:"No votes yet"})]}),e.jsxs("div",{className:"p-4 sm:p-6 rounded-2xl cursor-pointer",style:{background:"rgba(147, 51, 234, 0.1)",border:"1px solid rgba(147, 51, 234, 0.3)"},onClick:()=>{v(h().length>1?i:"women"),p(0)},children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-purple-300 mb-4",children:["ðŸ‘© Princess Votes (",u().length,")"]}),u().length>0?e.jsx("div",{className:"space-y-3",children:u().map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg",style:{background:"rgba(255, 255, 255, 0.05)"},children:[e.jsx("div",{className:"relative rounded-xl overflow-hidden",style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.5), inset 0 0 30px rgba(255, 255, 255, 0.03)"},children:e.jsx("img",{src:`https://zipfile.pythonanywhere.com/${t.image}`,alt:t.title,className:"w-16 h-16 object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-white font-semibold truncate",children:t.title}),e.jsx("p",{className:"text-purple-200 text-sm",children:t.location})]}),e.jsx("button",{onClick:()=>N(t.id),className:"text-xs px-3 py-1 rounded-full bg-red-500 hover:bg-red-600 text-white transition-colors whitespace-nowrap",children:"Remove"})]},t.id))}):e.jsx("p",{className:"text-gray-400",children:"No votes yet"})]})]})]})]}),e.jsx("style",{children:`
        
        @keyframes shine {
          0% { background-position: -200% center; }
          100% { background-position: 200% center; }
        }
        @keyframes blink {
          0%, 50% { opacity: 1; }
          51%, 100% { opacity: 0; }
        }
        .star {
          position: absolute;
          background: white;
          border-radius: 50%;
          animation: blink 2s infinite;
        }
        .moon {
          position: absolute;
          top: 10%;
          left: 10%;
          width: 60px;
          height: 60px;
          background: radial-gradient(circle at 25% 25%, transparent 35%, #ffeb3b 36%, #ffeb3b 65%, transparent 66%);
          border-radius: 50%;
          opacity: 0.7;
          box-shadow: 0 0 20px rgba(255, 235, 59, 0.5);
        }
      `})]})}export{ce as default};
